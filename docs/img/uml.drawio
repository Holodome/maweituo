<mxfile host="65bd71144e">
    <diagram id="IeFkLcC72xmeMf9-o3qL" name="Page-1">
        <mxGraphModel dx="6230" dy="5255" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="217" value="Infrastructure" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;" vertex="1" parent="1">
                    <mxGeometry x="-640" y="-1280" width="1710" height="1100" as="geometry"/>
                </mxCell>
                <mxCell id="176" value="Recs" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;" vertex="1" parent="1">
                    <mxGeometry x="3350" y="120" width="2740" height="960" as="geometry"/>
                </mxCell>
                <mxCell id="183" value="ETL" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;" vertex="1" parent="1">
                    <mxGeometry x="5030" y="120" width="1060" height="590" as="geometry"/>
                </mxCell>
                <mxCell id="2" value="BL" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-970" y="-40" width="4210" height="1120" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;UserRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ create(request: User): F[UserID]&lt;br&gt;&amp;nbsp;+ all(): F[List[User]]&lt;br&gt;&amp;nbsp;+ find(id: UserId): OptionT[F, User]&lt;br&gt;&amp;nbsp;+ findByEmail(emai: Email): OptionT[F, User]&lt;br&gt;&amp;nbsp;+ findByName(name: Username): OptionT[F, User]&amp;nbsp;&lt;br&gt;&amp;nbsp;+ delete(id: UserId): F[Unit]&lt;br&gt;&amp;nbsp;+ update(update: UpdateUser): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="100" y="770" width="280" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="10" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;AdvertisementRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ create(request: Advertisement): F[AdId]&lt;br&gt;&amp;nbsp;+ all(): F[List[Advertisement]]&lt;br&gt;&amp;nbsp;+ find(id: AdId): OptionT[F, Advertisement]&lt;br&gt;&amp;nbsp;+ delete(id: AdId): F[Unit]&lt;br&gt;&amp;nbsp;+ addTag(id: AdtId, tag: AdTag): F[Unit]&lt;br&gt;&amp;nbsp;+ addImage(id: AdId, img: ImageId): F[Unit]&lt;br&gt;&amp;nbsp;+ addParam(id: AdId, tag: AdTag, param: AdParam): F[Unit]&lt;br&gt;&amp;nbsp;+ removeTag(id: AdId, tag: AdTag): F[Unit]&lt;br&gt;&amp;nbsp;+ removeImage(id: AdId, image: ImageId)&lt;br&gt;&amp;nbsp;+ removeParam(id: AdId, param: AdParam): F[Unit]&lt;br&gt;&amp;nbsp;+ update(update: UpdateAd): F[Unit]&amp;nbsp;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="450" y="770" width="320" height="210" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;ChatRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ create(adId: AdId, author: UserId, client: UserId):&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;F[ChatD]&lt;br&gt;&amp;nbsp;+ find(id: ChatId): OptionT[F, Chat]&lt;br&gt;&amp;nbsp;+ findByAdAndClient(adId: AdId, client: UserId): &lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;OptionT[F, Chat]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="830" y="770" width="280" height="131" as="geometry"/>
                </mxCell>
                <mxCell id="72" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpSize=21;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" parent="1" source="12" target="71" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;MessageRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ send(chat: ChatId, sender: UserId, &lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;text: MessageText): F[Unit]&lt;br&gt;&amp;nbsp;+ history(chatId: ChatId): F[List[Message]]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1200" y="770" width="280" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpSize=21;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" parent="1" source="13" target="75" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="13" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;ImageRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ create(adId: AdId, url: ImageUrl): F[ImageId]&lt;br&gt;&amp;nbsp;+ getMeta(image: ImageId): F[Image]&lt;br&gt;&amp;nbsp;+ delete(image: ImageId): F[Unit]&amp;nbsp;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1590" y="770" width="280" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="DA" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-970" y="1140" width="3470" height="340" as="geometry"/>
                </mxCell>
                <mxCell id="15" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;CassandraMessageRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ send(chat: ChatId, sender: UserId, &lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;text: MessageText): F[Unit]&lt;br&gt;&amp;nbsp;+ history(chatId: ChatId): F[List[Message]]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="100" y="1220" width="280" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="16" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;CassandraAdvertisementRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ create(request: Advertisement): F[AdId]&lt;br&gt;&amp;nbsp;+ all(): F[List[Advertisement]]&lt;br&gt;&amp;nbsp;+ find(id: AdId): OptionT[F, Advertisement]&lt;br&gt;&amp;nbsp;+ delete(id: AdId): F[Unit]&lt;br&gt;&amp;nbsp;+ addTag(id: AdtId, tag: AdTag): F[Unit]&lt;br&gt;&amp;nbsp;+ addImage(id: AdId, img: ImageId): F[Unit]&lt;br&gt;&amp;nbsp;+ addParam(id: AdId, tag: AdTag, param: AdParam): F[Unit]&lt;br&gt;&amp;nbsp;+ removeTag(id: AdId, tag: AdTag): F[Unit]&lt;br&gt;&amp;nbsp;+ removeImage(id: AdId, image: ImageId)&lt;br&gt;&amp;nbsp;+ removeParam(id: AdId, param: AdParam): F[Unit]&lt;br&gt;&amp;nbsp;+ update(update: UpdateAd): F[Unit]&amp;nbsp;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="450" y="1220" width="320" height="210" as="geometry"/>
                </mxCell>
                <mxCell id="22" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;CassandraChatRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ create(adId: AdId, author: UserId, client: UserId):&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;F[ChatD]&lt;br&gt;&amp;nbsp;+ find(id: ChatId): OptionT[F, Chat]&lt;br&gt;&amp;nbsp;+ findByAdAndClient(adId: AdId, client: UserId): &lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;OptionT[F, Chat]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="830" y="1230" width="280" height="131" as="geometry"/>
                </mxCell>
                <mxCell id="23" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;CassandraMessageRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ send(chat: ChatId, sender: UserId, &lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;text: MessageText): F[Unit]&lt;br&gt;&amp;nbsp;+ history(chatId: ChatId): F[List[Message]]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1200" y="1230" width="280" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="24" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;CassandraImageRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ create(adId: AdId, url: ImageUrl): F[ImageId]&lt;br&gt;&amp;nbsp;+ getMeta(image: ImageId): F[Image]&lt;br&gt;&amp;nbsp;+ delete(image: ImageId): F[Unit]&amp;nbsp;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1590" y="1230" width="280" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="141" style="edgeStyle=orthogonalEdgeStyle;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;rounded=0;" edge="1" parent="1" source="35" target="58">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="170" y="220"/>
                            <mxPoint x="75" y="220"/>
                            <mxPoint x="75" y="670"/>
                            <mxPoint x="-20" y="670"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="229" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="35" target="226">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="233" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="35" target="228">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="240" y="80"/>
                            <mxPoint x="470" y="80"/>
                            <mxPoint x="470" y="-690"/>
                            <mxPoint x="230" y="-690"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="35" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;UserService[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ find(id: UserId): F[User]&lt;br&gt;&amp;nbsp;+ findByName(name: Username): F[User]&lt;br&gt;&amp;nbsp;+ delete(subject: UserId, authorized: UserId):&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;F[Unit]&lt;br&gt;&amp;nbsp;+ update(update: UpdateUser, authorized: UserId):&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;F[Unit]&lt;br&gt;&amp;nbsp;+ register(body: RegisterInfo): F[UserId]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="100" y="250" width="280" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="70" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpSize=21;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" parent="1" source="36" target="67" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="680" y="220"/>
                            <mxPoint x="790" y="220"/>
                            <mxPoint x="790" y="670"/>
                            <mxPoint x="900" y="670"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="246" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="36" target="221">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="610" y="-250"/>
                            <mxPoint x="630" y="-250"/>
                            <mxPoint x="630" y="-990"/>
                            <mxPoint x="540" y="-990"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="247" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="36" target="222">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="610" y="-250"/>
                            <mxPoint x="630" y="-250"/>
                            <mxPoint x="630" y="-990"/>
                            <mxPoint x="870" y="-990"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="36" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;AdvertisementService[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ find(id: AdId): F[Advertisement]&lt;br&gt;&amp;nbsp;+ all(): F[List[Advertisement]]&lt;br&gt;&amp;nbsp;+ create(authorId: UserId, create: CreateAd): F[Unit]&lt;br&gt;&amp;nbsp;+ delete(id: AdtId, userId: UserId): F[Unit]&lt;br&gt;&amp;nbsp;+ authorizeModification(id: AdId,&amp;nbsp;userId: UserId): &lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;F[Unit]&lt;br&gt;&amp;nbsp;+ addImage(id: AdId, imageId: ImageId,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;userId: UserId): F[Unit]&amp;nbsp;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="470" y="250" width="280" height="170" as="geometry"/>
                </mxCell>
                <mxCell id="73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpSize=21;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" parent="1" source="37" target="71" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1040" y="220"/>
                            <mxPoint x="1155" y="220"/>
                            <mxPoint x="1155" y="650"/>
                            <mxPoint x="1270" y="650"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="243" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="37" target="218">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="970" y="-320"/>
                            <mxPoint x="510" y="-320"/>
                            <mxPoint x="510" y="-890"/>
                            <mxPoint x="-410" y="-890"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="37" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;ChatService[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ create(adId: AdId, clientId: UserId): F[Unit]&lt;br&gt;&amp;nbsp;+ find(chatId: ChatId): F[Chat]&lt;br&gt;&amp;nbsp;+ authorizeChatAccess(chatId: ChatId,&amp;nbsp;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;userId: UserId): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="830" y="250" width="280" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="245" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="38" target="220">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1340" y="-380"/>
                            <mxPoint x="590" y="-380"/>
                            <mxPoint x="590" y="-950"/>
                            <mxPoint x="230" y="-950"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="38" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;MessageService[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ send(chatId: ChatId, senderId: UserId,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;req: SendMessage): F[Unit]&lt;br&gt;&amp;nbsp;+ history(chatId: ChatId, requester: UserId):&amp;nbsp;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;F[List[Message]]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1200" y="250" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="244" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="39" target="219">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1730" y="-350"/>
                            <mxPoint x="550" y="-350"/>
                            <mxPoint x="550" y="-920"/>
                            <mxPoint x="-90" y="-920"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="39" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;ImageService[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ upload(uploader: UserId, adId: AdId,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;contents: ImageContents): F[ImageId]&lt;br&gt;&amp;nbsp;+ delete(imageId: ImageId, user: UserId): F[Unit]&lt;br&gt;&amp;nbsp;+ get(imageId: ImageId): F[ImageContents]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1590" y="250" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="49" style="edgeStyle=none;rounded=0;jumpSize=21;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;endArrow=classic;endFill=1;" parent="1" source="40" target="9" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="40" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;UserServiceInterpreter[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ find(id: UserId): F[User]&lt;br&gt;&amp;nbsp;+ findByName(name: Username): F[User]&lt;br&gt;&amp;nbsp;+ delete(subject: UserId, authorized: UserId):&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;F[Unit]&lt;br&gt;&amp;nbsp;+ update(update: UpdateUser, authorized: UserId):&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;F[Unit]&lt;br&gt;&amp;nbsp;+ register(body: RegisterInfo): F[UserId]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="100" y="500" width="280" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="50" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;jumpSize=21;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="40" target="35" edge="1">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="420" y="490" as="sourcePoint"/>
                        <mxPoint x="580" y="490" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="51" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;jumpSize=21;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="15" target="9" edge="1">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="300" y="1110" as="sourcePoint"/>
                        <mxPoint x="460" y="1110" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="52" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;jumpSize=21;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="16" target="10" edge="1">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="620" y="1100" as="sourcePoint"/>
                        <mxPoint x="780" y="1100" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="53" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;jumpSize=21;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="22" target="11" edge="1">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="960" y="1100" as="sourcePoint"/>
                        <mxPoint x="1120" y="1100" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="54" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;jumpSize=21;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="23" target="12" edge="1">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="1400" y="1110" as="sourcePoint"/>
                        <mxPoint x="1560" y="1110" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="55" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;jumpSize=21;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="24" target="13" edge="1">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="1710" y="1100" as="sourcePoint"/>
                        <mxPoint x="1870" y="1100" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="230" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="56" target="225">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="-90" y="-230"/>
                            <mxPoint x="230" y="-230"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="231" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="56" target="224">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="56" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;AuthService[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ login(username: Username, password:&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;Password): F[JwtToken]&lt;br&gt;&amp;nbsp;+ logout(uid: UserId, token: JwtToken): F[Unit]&lt;br&gt;&amp;nbsp;+ authed(token: JwtToken): OptionT[F, AuthedUser]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-230" y="250" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="58" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;AuthServiceInterpreter[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ login(username: Username, password:&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;Password): F[JwtToken]&lt;br&gt;&amp;nbsp;+ logout(uid: UserId, token: JwtToken): F[Unit]&lt;br&gt;&amp;nbsp;+ authed(token: JwtToken): OptionT[F, AuthedUser]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-230" y="505" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="59" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;jumpSize=21;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="58" target="56" edge="1">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="-40" y="-100" as="sourcePoint"/>
                        <mxPoint x="120" y="-100" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpSize=21;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="64" target="10" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="64" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;AdvertisementServiceInterpreter[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ find(id: AdId): F[Advertisement]&lt;br&gt;&amp;nbsp;+ all(): F[List[Advertisement]]&lt;br&gt;&amp;nbsp;+ create(authorId: UserId, create: CreateAd): F[Unit]&lt;br&gt;&amp;nbsp;+ delete(id: AdtId, userId: UserId): F[Unit]&lt;br&gt;&amp;nbsp;+ authorizeModification(id: AdId,&amp;nbsp;userId: UserId): &lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;F[Unit]&lt;br&gt;&amp;nbsp;+ addImage(id: AdId, imageId: ImageId,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;userId: UserId): F[Unit]&amp;nbsp;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="470" y="495" width="280" height="170" as="geometry"/>
                </mxCell>
                <mxCell id="66" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;jumpSize=21;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="64" target="36" edge="1">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="730" y="460" as="sourcePoint"/>
                        <mxPoint x="890" y="460" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpSize=21;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="67" target="11" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="67" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ChatServiceInterpreter[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ create(adId: AdId, clientId: UserId): F[Unit]&lt;br&gt;&amp;nbsp;+ find(chatId: ChatId): F[Chat]&lt;br&gt;&amp;nbsp;+ authorizeChatAccess(chatId: ChatId,&amp;nbsp;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;userId: UserId): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="830" y="495" width="280" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="68" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;jumpSize=21;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="67" target="37" edge="1">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="1150" y="450" as="sourcePoint"/>
                        <mxPoint x="1310" y="450" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="71" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MessageServiceInterpreter[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ send(chatId: ChatId, senderId: UserId,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;req: SendMessage): F[Unit]&lt;br&gt;&amp;nbsp;+ history(chatId: ChatId, requester: UserId):&amp;nbsp;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;F[HistoryResponse]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1200" y="500" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="74" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;jumpSize=21;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="71" target="38" edge="1">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="1470" y="460" as="sourcePoint"/>
                        <mxPoint x="1630" y="460" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="77" style="edgeStyle=orthogonalEdgeStyle;rounded=0;jumpSize=21;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=none;endFill=0;" parent="1" source="75" target="36" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1660" y="670"/>
                            <mxPoint x="790" y="670"/>
                            <mxPoint x="790" y="220"/>
                            <mxPoint x="680" y="220"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="75" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ImageServiceIntrerpreter[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ upload(uploader: UserId, adId: AdId,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;contents: ImageContents): F[ImageId]&lt;br&gt;&amp;nbsp;+ delete(imageId: ImageId, user: UserId): F[Unit]&lt;br&gt;&amp;nbsp;+ get(imageId: ImageId): F[ImageContents]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1590" y="500" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="79" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;jumpSize=21;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="75" target="39" edge="1">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="2290" y="510" as="sourcePoint"/>
                        <mxPoint x="2450" y="510" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="105" value="GRPC Servers" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;" parent="1" vertex="1">
                    <mxGeometry x="3350" y="780" width="700" height="300" as="geometry"/>
                </mxCell>
                <mxCell id="125" value="Infrastructure Implementation" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1140" y="-1270" width="660" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="126" value="Infrastructure" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1140" y="-1020" width="660" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="172" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="127" target="56">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1630" y="-130"/>
                            <mxPoint x="-20" y="-130"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="127" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;EmpemeralDict[F, A, B]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ store(a: A, b: B): F[Unit]&lt;br&gt;&amp;nbsp;+ delete(a: A): F[Unit]&lt;br&gt;&amp;nbsp;+ get(a: A): OptionT[F, B]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1490" y="-960" width="280" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="128" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;RedisEmpemeralDict[F, A, B]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ store(a: A, b: B): F[Unit]&lt;br&gt;&amp;nbsp;+ delete(a: A): F[Unit]&lt;br&gt;&amp;nbsp;+ get(a: A): OptionT[F, B]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1490" y="-1220" width="280" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="171" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="130" target="39">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1310" y="40"/>
                            <mxPoint x="1800" y="40"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="195" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="130" target="191">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1380" y="-195"/>
                            <mxPoint x="4940" y="-195"/>
                            <mxPoint x="4940" y="430"/>
                            <mxPoint x="5140" y="430"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="130" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;ObjectStorage[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ put(id: ObjectId, data: Array[Byte]): F[Unit]&lt;br&gt;&amp;nbsp;+ get(id: ObjectId): F[Array[Byte]]&lt;br&gt;&amp;nbsp;+ delete(id: ObjectId): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1170" y="-960" width="280" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="131" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MinioObjectStorage[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ put(id: ObjectId, data: Array[Byte]): F[Unit]&lt;br&gt;&amp;nbsp;+ get(id: ObjectId): F[Array[Byte]]&lt;br&gt;&amp;nbsp;+ delete(id: ObjectId): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1170" y="-1220" width="280" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="232" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="134" target="223">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="134" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;FeedService[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ getPersonalized(user: UserId): F[List[AdId]]&lt;br&gt;&amp;nbsp;+ getGlobal: F[List[AdId]]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1970" y="250" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="140" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="135" target="137">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="135" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;FeedServiceInterpreter[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ getPersonalized(user: UserId): F[List[AdId]]&lt;br&gt;&amp;nbsp;+ getGlobal: F[List[AdId]]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1970" y="500" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="136" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="135" target="134">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="2610" y="410" as="sourcePoint"/>
                        <mxPoint x="2770" y="410" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="137" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;FeedRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ getPersonalized(user: UserId): F[List[AdId]]&lt;br&gt;&amp;nbsp;+ getGlobal: F[List[AdId]]&lt;br&gt;&amp;nbsp;+ setPersonalized(userId: UserId, ads: List[AdId]):&lt;br&gt;&amp;nbsp;F[Unit]&lt;br&gt;&amp;nbsp;+ addToGlobalFeed(ad: AdId): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1970" y="770" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="138" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;CassandraFeedRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ getPersonalized(user: UserId): F[List[AdId]]&lt;br&gt;&amp;nbsp;+ getGlobal: F[List[AdId]]&lt;br&gt;&amp;nbsp;+ setPersonalized(userId: UserId, ads: List[AdId]):&lt;br&gt;&amp;nbsp;F[Unit]&lt;br&gt;&amp;nbsp;+ addToGlobalFeed(ad: AdId): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1970" y="1235.5" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="139" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;jumpSize=21;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="138" target="137">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="2260" y="1220" as="sourcePoint"/>
                        <mxPoint x="2260" y="860" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="149" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="142" target="35">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="-340" y="180"/>
                            <mxPoint x="310" y="180"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="150" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="142" target="36">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="-340" y="180"/>
                            <mxPoint x="680" y="180"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="151" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="142" target="38">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="-340" y="180"/>
                            <mxPoint x="1410" y="180"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="152" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="142" target="37">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="-340" y="180"/>
                            <mxPoint x="1040" y="180"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="153" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="142" target="39">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="-340" y="180"/>
                            <mxPoint x="1660" y="180"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="142" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;IAMService[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ authorizeChatAccess(chatId: ChatId, userId:&amp;nbsp;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;UserId): F[Unit]&lt;br&gt;&amp;nbsp;+ authorizeAdModification(adId: AdId, userId:&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;UserId): F[Unit]&lt;br&gt;&amp;nbsp;+ authorizeUserModification(target: UserId,&amp;nbsp;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;userId: UserId): F[Unit]&lt;br&gt;&amp;nbsp;+ authorizeImageDelete(imageId: ImageId,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;userId: UserId): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="-550" y="250" width="280" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="145" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="143" target="10">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="146" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="143" target="11">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="147" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="143" target="13">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="143" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;IAMServiceInterpreter[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ authorizeChatAccess(chatId: ChatId, userId:&amp;nbsp;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;UserId): F[Unit]&lt;br&gt;&amp;nbsp;+ authorizeAdModification(adId: AdId, userId:&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;UserId): F[Unit]&lt;br&gt;&amp;nbsp;+ authorizeUserModification(target: UserId,&amp;nbsp;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;userId: UserId): F[Unit]&lt;br&gt;&amp;nbsp;+ authorizeImageDelete(imageId: ImageId,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;userId: UserId): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="-550" y="510" width="280" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="144" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="143" target="142">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="-730" y="530" as="sourcePoint"/>
                        <mxPoint x="-570" y="530" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="163" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="154" target="37">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="2380" y="120"/>
                            <mxPoint x="900" y="120"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="164" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.107;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="154" target="36">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="2380" y="120"/>
                            <mxPoint x="500" y="120"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="178" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="154" target="174">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="2520" y="740"/>
                            <mxPoint x="3610" y="740"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="154" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;TelemetryService[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ userCreated(user: UserId, ad: AdId): F[Unit]&lt;br&gt;&amp;nbsp;+ userBought(user: UserId, ad: AdId): F[Unit]&lt;br&gt;&amp;nbsp;+ userDiscussed(user: UserId, ad: AdId): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="2310" y="250" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="156" value="GRPC Clients" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;" vertex="1" parent="1">
                    <mxGeometry x="2610" y="780" width="630" height="300" as="geometry"/>
                </mxCell>
                <mxCell id="157" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;TelemetryServiceGRPCClient[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ userCreated(user: UserId, ad: AdId): F[Unit]&lt;br&gt;&amp;nbsp;+ userBought(user: UserId, ad: AdId): F[Unit]&lt;br&gt;&amp;nbsp;+ userDiscussed(user: UserId, ad: AdId): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="2630" y="860" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="158" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="157" target="154">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="2720" y="610" as="sourcePoint"/>
                        <mxPoint x="2880" y="610" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="2770" y="470"/>
                            <mxPoint x="2450" y="470"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="167" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="159" target="134">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="2870" y="180"/>
                            <mxPoint x="2040" y="180"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="177" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="159" target="175">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="3010" y="670"/>
                            <mxPoint x="3920" y="670"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="159" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;RecommendationService[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ getRecs(user: UserId, count: Int): F[List[AdId]]&lt;br&gt;&amp;nbsp;+ learn: F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="2800" y="250" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="165" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;RecommendationServiceGRPCClient[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ getRecs(user: UserId, count: Int): F[List[AdId]]&lt;br&gt;&amp;nbsp;+ learn: F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="2930" y="860" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="166" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="165" target="159">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="2980" y="670" as="sourcePoint"/>
                        <mxPoint x="3140" y="670" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="3070" y="430"/>
                            <mxPoint x="2940" y="430"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="168" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="131" target="130">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="1030" y="-1010" as="sourcePoint"/>
                        <mxPoint x="1190" y="-1010" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="169" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="128" target="127">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="1830" y="-1030" as="sourcePoint"/>
                        <mxPoint x="1990" y="-1030" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="174" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;TelemetryGRPCServer[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="3400" y="860" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="175" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;RecsGRPCServer[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="3710" y="860" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="179" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;TelemetryServiceInterpreter[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ userCreated(user: UserId, ad: AdId): F[Unit]&lt;br&gt;&amp;nbsp;+ userBought(user: UserId, ad: AdId): F[Unit]&lt;br&gt;&amp;nbsp;+ userDiscussed(user: UserId, ad: AdId): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="4120" y="250" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="180" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="179" target="154">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="3300" y="440" as="sourcePoint"/>
                        <mxPoint x="3460" y="440" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="4190" y="470"/>
                            <mxPoint x="2450" y="470"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="181" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;RecommendationService[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ getRecs(user: UserId, count: Int): F[List[AdId]]&lt;br&gt;&amp;nbsp;+ learn: F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="4470" y="250" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="182" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="181" target="159">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="4400" y="510" as="sourcePoint"/>
                        <mxPoint x="4560" y="510" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="4520" y="430"/>
                            <mxPoint x="2940" y="430"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="187" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="184" target="181">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="5210" y="190"/>
                            <mxPoint x="4660" y="190"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="184" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;RecETL[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ run: F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="5070" y="280" width="280" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="186" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="185" target="179">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="185" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i style=&quot;border-color: var(--border-color);&quot;&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;b&gt;&lt;br&gt;TelemetryRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ userCreated(user: UserId, ad: AdId): F[Unit]&lt;br&gt;&amp;nbsp;+ userBought(user: UserId, ad: AdId): F[Unit]&lt;br&gt;&amp;nbsp;+ userDiscussed(user: UserId, ad: AdId): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="4120" y="580" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="211" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="188" target="181">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="188" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i style=&quot;border-color: var(--border-color);&quot;&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;b&gt;&lt;br&gt;RecRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ get(userId: UserId): OptionT[F, WeightVector]&lt;br&gt;&amp;nbsp;+ getClosest(user: UserId, count: Int): F[List[UserId]]&lt;br&gt;&amp;nbsp;+ getUserCreated(user: UserId): OptionT[F, Set[AdId]]&lt;br&gt;&amp;nbsp;+ getUserBought(user: UserId): OptionT[F, Set[AdId]]&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp;+ getUserDiscussed(user: UserId): OptionT[F, Set[AdId]]&lt;br&gt;&amp;nbsp;+ getTagByIdx(idx: Int): OptionT[F, AdTag]&lt;br&gt;&amp;nbsp;+ getAdsByTag(tag: AdTag): OptionT[F, Set[AdId]]&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="4450" y="580" width="320" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="193" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="189" target="191">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="189" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;RecETLExtractor[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ extract: F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="5410" y="280" width="280" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="194" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="190" target="191">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="190" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;RecETLLoader[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ load: F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="5730" y="280" width="280" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="191" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;RecETLInterpreter[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ run: F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="5070" y="470" width="280" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="192" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="191" target="184">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="5000" y="460" as="sourcePoint"/>
                        <mxPoint x="5160" y="460" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="196" value="ETL Implementation" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;" vertex="1" parent="1">
                    <mxGeometry x="5380" y="500" width="710" height="210" as="geometry"/>
                </mxCell>
                <mxCell id="202" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;endArrow=none;endFill=0;startArrow=classic;startFill=1;" edge="1" parent="1" source="197">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="5140" y="430" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="5480" y="430"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="197" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;CassandraExtract[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ extract: F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="5410" y="590" width="280" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="207" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" edge="1" parent="1" source="198">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="5480" y="430" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="5800" y="430"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="198" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ClickhouseLoad[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ load: F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="5730" y="590" width="280" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="200" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="197" target="189">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="6120" y="470" as="sourcePoint"/>
                        <mxPoint x="6280" y="470" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="201" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="198" target="190">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="6180" y="510" as="sourcePoint"/>
                        <mxPoint x="6340" y="510" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="212" value="Recs DA" style="verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;" vertex="1" parent="1">
                    <mxGeometry x="4070" y="780" width="910" height="300" as="geometry"/>
                </mxCell>
                <mxCell id="213" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;CassandraTelemetryRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ userCreated(user: UserId, ad: AdId): F[Unit]&lt;br&gt;&amp;nbsp;+ userBought(user: UserId, ad: AdId): F[Unit]&lt;br&gt;&amp;nbsp;+ userDiscussed(user: UserId, ad: AdId): F[Unit]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="4120" y="850" width="280" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="214" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ClickhouseRecRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ get(userId: UserId): OptionT[F, WeightVector]&lt;br&gt;&amp;nbsp;+ getClosest(user: UserId, count: Int): F[List[UserId]]&lt;br&gt;&amp;nbsp;+ getUserCreated(user: UserId): OptionT[F, Set[AdId]]&lt;br&gt;&amp;nbsp;+ getUserBought(user: UserId): OptionT[F, Set[AdId]]&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp;+ getUserDiscussed(user: UserId): OptionT[F, Set[AdId]]&lt;br&gt;&amp;nbsp;+ getTagByIdx(idx: Int): OptionT[F, AdTag]&lt;br&gt;&amp;nbsp;+ getAdsByTag(tag: AdTag): OptionT[F, Set[AdId]]&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="4450" y="850" width="320" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="215" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="213" target="185">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="4300" y="740" as="sourcePoint"/>
                        <mxPoint x="4460" y="740" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="216" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="214" target="188">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="4790" y="790" as="sourcePoint"/>
                        <mxPoint x="4950" y="790" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="218" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;AdChatRoutes[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ routes: HttpRoutes[F]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="-550" y="-1200" width="280" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="219" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;AdImageRoutes[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ routes: HttpRoutes[F]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="-230" y="-1200" width="280" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="220" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;AdMsgRoutes[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ routes: HttpRoutes[F]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="90" y="-1200" width="280" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="221" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;AdRoutes[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ routes: HttpRoutes[F]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="400" y="-1200" width="280" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="222" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;AdTagRoutes[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ routes: HttpRoutes[F]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="730" y="-1200" width="280" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="223" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;FeedRoutes[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ routes: HttpRoutes[F]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="730" y="-840" width="280" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="224" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;LoginRoutes[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ routes: HttpRoutes[F]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="-230" y="-530" width="280" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="225" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;LogoutRoutes[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ routes: HttpRoutes[F]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="90" y="-530" width="280" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="226" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;RegisterRoutes[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ routes: HttpRoutes[F]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="-565" y="-530" width="280" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="227" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;TagRoutes[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ routes: HttpRoutes[F]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="-230" y="-850" width="280" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="228" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;UserRoutes[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ routes: HttpRoutes[F]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="90" y="-850" width="280" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="242" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="234" target="227">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="-740" y="-700"/>
                            <mxPoint x="-90" y="-700"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="234" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;TagService[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ all: F[List[AdTag]]&lt;br&gt;&amp;nbsp;+ find(tag: AdTag): F[List[AdId]]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="-880" y="250" width="280" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="240" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="235" target="238">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="235" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;&amp;lt;&amp;lt;Interface&amp;gt;&amp;gt;&lt;/i&gt;&lt;br&gt;&lt;b&gt;TagRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ getAllTags: F[List[AdTag]]&lt;br&gt;&amp;nbsp;+ addTag(tag: AdTag): F[Unit]&lt;br&gt;&amp;nbsp;+ addTagToAdd(adId: AdId, tag: AdTag): F[Unit]&lt;br&gt;&amp;nbsp;+ removeTagFromAd(adId: AdId, tag: AdTag):&amp;nbsp;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;F[Unit]&lt;br&gt;&amp;nbsp;+ getAllAdsByTag(tag: AdTag): F[Set[AdId]]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="-880" y="770" width="280" height="150" as="geometry"/>
                </mxCell>
                <mxCell id="236" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;CassandraTagRepository[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ getAllTags: F[List[AdTag]]&lt;br&gt;&amp;nbsp;+ addTag(tag: AdTag): F[Unit]&lt;br&gt;&amp;nbsp;+ addTagToAdd(adId: AdId, tag: AdTag): F[Unit]&lt;br&gt;&amp;nbsp;+ removeTagFromAd(adId: AdId, tag: AdTag):&amp;nbsp;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;F[Unit]&lt;br&gt;&amp;nbsp;+ getAllAdsByTag(tag: AdTag): F[Set[AdId]]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="-880" y="1220" width="280" height="150" as="geometry"/>
                </mxCell>
                <mxCell id="237" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="236" target="235">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="-550" y="1100" as="sourcePoint"/>
                        <mxPoint x="-390" y="1100" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="238" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;TagServiceInterpreter[F]&lt;/b&gt;&lt;/p&gt;&lt;hr&gt;&amp;nbsp;+ all: F[List[AdTag]]&lt;br&gt;&amp;nbsp;+ find(tag: AdTag): F[List[AdId]]" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;" vertex="1" parent="1">
                    <mxGeometry x="-880" y="510" width="280" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="241" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="238" target="234">
                    <mxGeometry width="160" relative="1" as="geometry">
                        <mxPoint x="-1020" y="450" as="sourcePoint"/>
                        <mxPoint x="-860" y="450" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>